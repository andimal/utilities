// Generated by CoffeeScript 1.6.3
(function($) {
  return $.fn.makeParallax = function(options) {
    var $_this, isNegative, settings;
    $_this = $(this);
    settings = $.extend({
      offset: 0,
      distance: 0
    }, options);
    isNegative = false;
    if (settings.distance < 0) {
      isNegative = true;
    }
    return $(window).scroll(function() {
      var calcRatio, newTop, perPixel, scrollDistance;
      if (!isNegative) {
        scrollDistance = $_this.parent().offset().top - settings.offset;
      } else {
        scrollDistance = settings.scrollDistance;
      }
      calcRatio = scrollDistance / settings.distance;
      perPixel = 1 / calcRatio;
      if (!isNegative) {
        newTop = settings.distance - ($(window).scrollTop() * perPixel);
      } else {
        newTop = $(window).scrollTop() * perPixel;
      }
      if (newTop > 0 && !isNegative) {
        return $_this.css('top', newTop);
      } else if (newTop < 0 && isNegative) {
        return $_this.css('top', newTop);
      } else {
        return $_this.removeAttr('style');
      }
    });
  };
})(jQuery);
